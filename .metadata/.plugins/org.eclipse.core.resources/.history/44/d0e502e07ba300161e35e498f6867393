package controllers;

import java.util.Date;
import java.util.GregorianCalendar;
import java.util.InputMismatchException;
import java.util.Scanner;

import entity.Menu;
import entity.OrderSheetPerTable;
import entity.Table;
import entity.TableAll;

public class OrderController extends MenuController {
	private TableAll tIR;
	private Menu menuToOrderFrom;
	
	public OrderController(){
		tIR = TableController.TableRecords;
		menuToOrderFrom = MenuController.menu;
	}
	
	public void run(){
		displayMenu();
		
	}
	
	public void displayMenu(){
		System.out.println("Please select option: (Enter -1 to return)");
		System.out.println("1. Add Order"); //Each table must initialise order sheet first before orders can be added in.  
		System.out.println("2. Update pre-exisiting order");
		System.out.println("3. Remove pre-exisiting order");
	}
	
	
	public void AddOrder(){
		//1. Ask for table number
		//2. Check if table has been initialised. If have proceed, if havent, must initialise ordersheet first. Input required: staffId, date, table Num)
		//3. Once init, drop down menu, get input for which item. Change status of table to 'occupied'
		//4. Ask for quantity
		//5. Add item to that tables ordersheet. 
		Date today = new GregorianCalendar().getTime();
		Scanner input = new Scanner(System.in);
		boolean x = true;
		boolean y = true;
		System.out.println("Add order");
		System.out.println("Please enter table number first: (Enter -1 to go back)");
		while(x){
			int tableNumber=0;
			do{
				try{
					tableNumber = input.nextInt();
					x = false;
				}catch(InputMismatchException e){
					System.out.println("Please input a number");
				}
			}while(y);
			if(tableNumber == -1)continue;
			//Get table object with corresponding table number
			y = true;
			Table tempTable = null;
			do{
				try{
					tempTable = tIR.getAllTheTables().get(tableNumber-1);
					y = false;
				}catch(ArrayIndexOutOfBoundsException e){
					System.out.println("Table does not exist");
				}
			}while(y);
			//Check if orderSheet for table has been initialised;
			y = true;
			if(tempTable.getOrderSheet() == null){
				System.out.println("This table has no order sheet yet. Please enter staff ID to create order sheet. (Enter -1 to return)");
				int staffId=0;
				do{
					try{
						staffId = input.nextInt();
						y = false;
					}catch(InputMismatchException e){
						System.out.println("Invalid staff ID");
					}
				}while(y);
				if(staffId == -1)continue;
				
				tempTable.initOrderSheet(tempTable.getTableNumber(), staffId, today);
				System.out.println("Order sheet created for table: "+ tempTable.getTableNumber());
			}
			OrderSheetPerTable orderSheetTemp = tempTable.getOrderSheet();
			System.out.println("Choose item to add into order sheet:");
			menuToOrderFrom.printMenuItem();
			y = true;
			do{
				
			}while(y);
			
			
			
		}
		
		
		
		
	}
	
	public void initOrderSheet(){
		
	}
	
	
}
